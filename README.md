<h1 align="center">东方小伙伴 ~ Adventure with Cute Partner</h1>

<div align="center">

一个专注于《东方Project》系列宠物的泰拉瑞亚模组

</div>

## 简介：

东方小伙伴致力于将《东方Project》系列中的角色以宠物的形式加入到泰拉瑞亚中，囊括从旧作到外传的各种角色，未来还会持续更新。

虽然是宠物模组，本模组不局限于将角色简单地作为一个随从加入游戏，而是尽可能地、赋予她们“灵魂”。

## 模组特色：

所有宠物都拥有生动的常态视觉效果（例如眨眼），且绝大部分宠物拥有自己的独特动态，会随机或是在一些特定条件下展现出来。

所有宠物都拥有“讲话”的能力！她们要说的话会悬浮在头顶上。

此外，本模组内的一些宠物之间偶尔会产生“交流”，如果您想知道哪些宠物之间可以进行对话，最好的方式自然就是了解这些角色之间的关系，请关注《东方Project》系列！

部分宠物可能会拥有有利于您或是不利于您的特殊能力，您可以在模组设置中控制这些能力是否会生效。

...当然，有一个人的能力是不受控制的...如果您选择与她同行，请您在战斗时务必注意自己的血量！

## 可控功能简述：

您可以通过模组设置调节如下功能：

- 宠物召唤物是否可以通过敌怪掉落或通过钓鱼获得，以及宠物商人是否会在世界中刷新
- 宠物是否可以进行对话以及对话文本的呈现方式
- 宠物是否可以施展其特殊能力
- 其他体验相关的设置，例如光标放于宠物前是否会令其隐形、开启兼容模式牺牲染料效果以避免出现部分问题等

## 模组联动相关

本模组目前已和幻想乡模组（Gensokyo Mod）合作，当您同时开启这两个模组时，来自幻想乡模组的Boss会掉落与其角色对应的宠物召唤物。

本模组支持在商店拓展模组（Shop Expand Mod）中快速购买宠物召唤物。

## 联动支持相关

本模组目前提供了四个 `Mod.Call` 方法，允许您让自己的模组更好地与本模组对接！

所有方法的返回值均为 `bool` 类型，以指示该操作是否成功执行

### PetDialog

为本模组宠物添加平常随机或在特定条件下可能会说出的话。

#### 参数

- `Mod` ：您的模组类名，用于日志信息，`Mod` 类型
- `UniquePetID` ：被添加对话的宠物的索引值，`int` 类型
- `ChatText` ：语句文本，`LocalizedText` 类型
- `Condition` ：允许说出该语句的条件，`Func<bool>` 类型，选填
- `Weight` ：语句的出现权重，值越大则出现几率越高，`int` 类型，选填

#### 注意事项

- `Condition` 默认为始终生效，后续的所有条件参数同理
- `Weight` 默认且最小为1，任何小于0的填入数值都会被强制设置为1，后续所有的权重参数同理

### PetsReactionToBoss

设置宠物遭遇不同Boss时会说出的话。

#### 参数

- `Mod` ：您的模组类名，用于日志信息，`Mod` 类型
- `BossType` ：被指定的Boss生物的种类，`int` 或 `short` 类型
- `UniquePetID` ：宠物索引值，可参考[TouhouPetID.cs](https://github.com/MineGame223/TouhouLittleFriend/blob/master/Common/TouhouPetUniqueID.cs)，建议您复制一份到自己的模组中以供便利，`int` 类型
- `ChatText` ：语句文本，`LocalizedText` 类型
- `Condition` ：允许说出该语句的条件，`Func<bool>` 类型，选填
- `Weight` ：语句的出现权重，值越大则出现几率越高，`int` 类型，选填

#### 注意事项

- `BossType` 代指的NPC必须能够被判定为Boss，即 `npc.boss = true`
- 若为同种类的Boss进行了多次添加，则最终的文本将从符合条件的所有语句中随机抽选

### YuyukosReactionToFood

设置幽幽子是否接受或拒绝某样食物并给出评价。

#### 参数

- `Mod` ：您的模组类名，用于日志信息，`Mod` 类型
- `FoodType` ：被指定的食物种类，`int` 或 `short` 类型
- `ChatText` ：语句文本，`LocalizedText` 类型
- `Accept` ：幽幽子是否接受该种食物，被拒绝的食物将不会被幽幽子选择吃掉，`bool` 类型，选填
- `Condition` ：允许说出该语句的条件，`Func<bool>` 类型，选填
- `Weight` ：语句的出现权重，值越大则出现几率越高，`int` 类型，选填

#### 注意事项

- `FoodType` 代指的物品必须能够被判定为食物，即 `ItemID.Sets.IsFood[item.type] = true`
- 若为同种类的食物进行了多次添加，则最终的文本将从符合条件的所有语句中随机抽选
- `Accept` 默认为接受

### PetChatRoom

为本模组宠物添加包含单个或多个宠物之间进行互动的聊天室，必须与 `PetDialog` 配合使用！

#### 参数

- `Mod` ：您的模组类名，用于日志信息，`Mod` 类型
- `ChatRoomInfoList` ：包含聊天室信息的元组列表，`List<(int, LocalizedText, int)>` 类型
- 列表中元组内的三个参数分别代表 `宠物索引` ，`对话文本` 和 `回合数`

#### 注意事项

- `对话文本` 的第一句应当首先用 `PetDialog` 进行注册，详细参考可查看[ModCallShowcase.cs](https://github.com/MineGame223/TouhouLittleFriend/blob/master/Common/ModSupports/ModCallShowcase.cs)
- `回合数` 从-1开始！

## 其他内容

- 有那么几个喜欢音乐的宠物可能会一时兴起、更改游戏的背景音乐。您可以通过查看游戏内的 `闹鬼的应援棒` 物品，了解如何让她们演奏由您甄选的音乐！

- 如果您在宠物商人那里消费了足够多的钱币，她或许会赠予您什么东西...

- 本模组支持简体中文、英语、俄语三种语言。

- 如果您在游玩过程中发现了任何问题，请及时反馈！或者如果您有什么更好的建议，也欢迎提出，我们的QQ交流群为 `753836414`。

<h1 align="center">最后，祝您玩的开心！</h1>
